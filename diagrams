---
  - name: Config Web VM with Docker
    hosts: webservers
    become: true
    tasks:

    - name: docker.io
      apt:
        force_apt_get: yes
        update_cache: yes
        name: docker.io
        state: present

    - name: Install pip3
      apt:
        force_apt_get: yes
        name: python3-pip
        state: present

    - name: Install Python Docker Module
      pip:
        name: docker
        state: present

    - name: download and lauch a docker web container
      docker_container:
        name: dvwa
        image: cyberxsecurity/dvwa
        state: started
        restart_policy: always
        published_ports: 80:80

    - name: enable docker service
      systemd:
        name: docker
        enabled: yes
        
        
        <mxfile host="app.diagrams.net" modified="2021-08-25T05:20:03.538Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36" etag="CgnRGR-AoQumXSL81V4g" version="14.9.9" type="device"><diagram name="Page-1" id="d66fe2ae-3e9f-cf2f-6d29-e24063ad5d60">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</diagram></mxfile>
        
